@model AgendaMedica.Models.Usuario
@{
    ViewData["Title"] = "Ingresar Usuarios";
}

@if (TempData["Mensaje"] != null)
{
    <script>
        alert("@TempData["Mensaje"]");
    </script>
}

<h1>Ingresar Usuarios</h1>
<div>
    <form asp-action="Create">
        <div>            
          <label class="form-label">Nombre del Usuario</label>
          <input type="text" class="form-control" asp-for="NombreUs" id="nombre" onblur="lostfocus('nombre')" placeholder="Ingrese su Nombre" name="nombre" autocomplete="off" autofocus="on" />
          <div id="enombre"></div>
        </div>
        <div>   
          <label class="form-label">Usuario</label>
          <input type="text" class="form-control" asp-for="Usuario1" id="usuario" onblur="lostfocus('usuario')" placeholder="Ingrese Usuario" name="usuario" autocomplete="off" />
          <div id="eusuario"></div>
        </div>
        <div>
          <label class="form-label">Contraseña</label>
          <input type="password" class="form-control" asp-for="Clave" id="clave" onblur="lostfocus('clave')" placeholder="Ingrese su Contraseña" name="clave" autocomplete="off" />
          <div id="eclave"></div>
        </div>
        <div class="mt-3 text-end">
            <a asp-action="Index" class="btn btn-outline-info">Volver</a>
            <input type="reset" value="Limpiar" onclick="FocusOnInput(); limpiar()" class="btn btn-info" />
            <input type="submit" value="Ingresar" class="btn btn-outline-success" />
        </div>
    </form>
</div>

<script>  
    function validar() {
        lostfocus('nombre')
        lostfocus('usuario')
        lostfocus('clave')
    }

    function lostfocus(idInput) {
        // error que se mostrara en caso de estar vacio el campo
        const msjError =
            '<span class = "badge bg-danger"> El campo es obligatorio </span>'
        // valida si el campo esta vacio o no
        if (document.getElementById(idInput).value.trim() == '')
            //sirve para agregar elementos a html por js
            document.getElementById('e' + idInput).innerHTML = msjError
        else
            document.getElementById('e' + idInput).innerHTML = ''
    }

    function limpiar() {
        console.log(document.querySelectorAll('input'))
        document.querySelectorAll('.form-control').forEach(item => {
            item.value = ''
        })
        document.querySelectorAll('span').forEach(item => {
            item.innerHTML = ''
        })
    }

    function FocusOnInput() {
        document.getElementById("nombre").focus();
    }
</script>
